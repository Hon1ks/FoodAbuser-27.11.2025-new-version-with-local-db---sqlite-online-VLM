# üöÄ Asset Bundling + FileSystem - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**–î–∞—Ç–∞:** 03.12.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **–í–∞—Ä–∏–∞–Ω—Ç 2: Asset Bundling + FileSystem** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ YOLOv8 –º–æ–¥–µ–ª–∏ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:**
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏ –≤ `FileSystem.documentDirectory`
   - –ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ –Ω–µ—Ç, –∫–æ–ø–∏—Ä—É–µ—Ç `model.json` –∏ 43 `.bin` —Ñ–∞–π–ª–∞ –∏–∑ `assets/models/`
   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç **2-3 –º–∏–Ω—É—Ç—ã** (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏)

2. **–ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—É—Å–∫–∞—Ö:**
   - –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –§–° –∑–∞ **2-5 —Å–µ–∫—É–Ω–¥**
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **–ë–∞–∑–∞ –ö–ë–ñ–£:**
   - `food_kbzu.json` —Ç–∞–∫–∂–µ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ FileSystem –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ 50+ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏)

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –í –ø—Ä–æ–µ–∫—Ç–µ (assets):
```
src/assets/models/
‚îú‚îÄ‚îÄ model.json                    # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ group1-shard1of43.bin        # –í–µ—Å–∞ (43 —Ñ–∞–π–ª–∞)
‚îú‚îÄ‚îÄ group1-shard2of43.bin
‚îú‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ group1-shard43of43.bin

src/assets/
‚îî‚îÄ‚îÄ food_kbzu.json               # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ö–ë–ñ–£
```

### –í FileSystem (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞):
```
FileSystem.documentDirectory/
‚îú‚îÄ‚îÄ yolo_model/
‚îÇ   ‚îú‚îÄ‚îÄ model.json
‚îÇ   ‚îú‚îÄ‚îÄ group1-shard1of43.bin
‚îÇ   ‚îú‚îÄ‚îÄ group1-shard2of43.bin
‚îÇ   ‚îú‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ group1-shard43of43.bin
‚îî‚îÄ‚îÄ food_kbzu.json
```

**–ü—É—Ç–∏:**
- **–ú–æ–¥–µ–ª—å:** `FileSystem.documentDirectory + 'yolo_model/'`
- **–ë–∞–∑–∞ –ö–ë–ñ–£:** `FileSystem.documentDirectory + 'food_kbzu.json'`

---

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### YoloFoodService.js

#### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
```javascript
const MODEL_DIR = FileSystem.documentDirectory + 'yolo_model/';
const MODEL_JSON_PATH = MODEL_DIR + 'model.json';
const FOOD_DB_PATH = FileSystem.documentDirectory + 'food_kbzu.json';
const TOTAL_SHARDS = 43;
```

#### 2. –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FileSystem:

**`checkModelExists()`** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
```javascript
async function checkModelExists() {
  // –ü—Ä–æ–≤–µ—Ä—è–µ—Ç model.json –∏ –≤—Å–µ 43 —à–∞—Ä–¥–∞
  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –µ—Å–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
}
```

**`copyModelToFileSystem()`** - –∫–æ–ø–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å
```javascript
async function copyModelToFileSystem() {
  // 1. –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é yolo_model/
  // 2. –ö–æ–ø–∏—Ä—É–µ—Ç model.json
  // 3. –ö–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ 43 .bin —Ñ–∞–π–ª–∞
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∫–æ–Ω—Å–æ–ª–∏ –∫–∞–∂–¥—ã–µ 5 —Ñ–∞–π–ª–æ–≤
}
```

**`loadModel()`** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ FileSystem
```javascript
export async function loadModel() {
  // 1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—É (web –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
  // 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–∏
  // 3. –ö–æ–ø–∏—Ä—É–µ—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  // 4. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —á–µ—Ä–µ–∑ tf.loadGraphModel(MODEL_JSON_PATH)
  // 5. –ü—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç –º–æ–¥–µ–ª—å
}
```

**`loadFoodDatabase()`** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ FileSystem
```javascript
async function loadFoodDatabase() {
  // 1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ food_kbzu.json
  // 2. –ö–æ–ø–∏—Ä—É–µ—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
  // 3. –ß–∏—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ FileSystem.readAsStringAsync()
  // 4. –ü–∞—Ä—Å–∏—Ç JSON
  // Fallback –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –±–∞–∑—É –ø—Ä–∏ –æ—à–∏–±–∫–µ
}
```

### AddMealScreen.js

#### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```javascript
const [modelLoading, setModelLoading] = React.useState(true);
const [modelLoadError, setModelLoadError] = React.useState(null);
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω useEffect:
```javascript
React.useEffect(() => {
  setModelLoading(true);
  YoloFoodService.loadModel()
    .then(loaded => {
      if (loaded) {
        setModelLoading(false);
      } else {
        setModelLoadError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å...');
        setModelLoading(false);
      }
    });
}, []);
```

#### 3. –î–æ–±–∞–≤–ª–µ–Ω UI –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:
```jsx
{modelLoading && (
  <Surface style={...}>
    <ActivityIndicator />
    <Text>–ó–∞–≥—Ä—É–∑–∫–∞ AI –º–æ–¥–µ–ª–∏... 2-3 –º–∏–Ω—É—Ç—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.</Text>
  </Surface>
)}

{modelLoadError && (
  <Surface style={...}>
    <Text>‚ö†Ô∏è {modelLoadError}</Text>
  </Surface>
)}
```

#### 4. –ö–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏:
```jsx
disabled={analyzing || modelLoading}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (—á–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞)

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
# iOS: Settings ‚Üí General ‚Üí iPhone Storage ‚Üí FoodAbuser ‚Üí Delete App
# Android: Settings ‚Üí Apps ‚Üí FoodAbuser ‚Üí Storage ‚Üí Clear Data

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
npm start
# –ù–∞–∂–º–∏—Ç–µ 'a' –¥–ª—è Android –∏–ª–∏ 'i' –¥–ª—è iOS
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
2. –ù–∞ —ç–∫—Ä–∞–Ω–µ "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏" –ø–æ—è–≤–ª—è–µ—Ç—Å—è:
   ```
   üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ AI –º–æ–¥–µ–ª–∏...
   –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-3 –º–∏–Ω—É—Ç—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.
   ```
3. –ö–Ω–æ–ø–∫–∏ "–§–æ—Ç–æ", "–ì–∞–ª–µ—Ä–µ—è", "–ê–Ω–∞–ª–∏–∑" –æ—Ç–∫–ª—é—á–µ–Ω—ã
4. –í –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏:
   ```
   üîÑ YoloFoodService: Starting model initialization...
   ‚úÖ YoloFoodService: TensorFlow.js initialized
   üì¶ YoloFoodService: Model not found in FileSystem, copying from assets...
   üì¶ Copying model.json...
   ‚úÖ model.json copied
   üì¶ Copying 43 binary shards...
   ‚úÖ Copied 5/43 shards (12%)
   ‚úÖ Copied 10/43 shards (23%)
   ...
   ‚úÖ Copied 43/43 shards (100%)
   ‚úÖ All model files copied successfully
   üîÑ YoloFoodService: Loading model from FileSystem...
   ‚úÖ YoloFoodService: Model loaded successfully
   ```
5. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏—Å—á–µ–∑–∞–µ—Ç
6. –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏

### –®–∞–≥ 2: –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–±–µ–∑ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö)
# Ctrl+C ‚Üí npm start ‚Üí 'a' –∏–ª–∏ 'i'
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ 2-5 —Å–µ–∫—É–Ω–¥
2. –ù–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (—É–∂–µ –≤ FileSystem)
3. –í –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏:
   ```
   üîÑ YoloFoodService: Starting model initialization...
   ‚úÖ YoloFoodService: TensorFlow.js initialized
   ‚úÖ YoloFoodService: Model found in FileSystem
   üîÑ YoloFoodService: Loading model from FileSystem...
   ‚úÖ YoloFoodService: Model loaded successfully
   ```
4. –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

### –®–∞–≥ 3: –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ

```bash
# –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏
# 1. –ù–∞–∂–º–∏—Ç–µ "–§–æ—Ç–æ" –∏–ª–∏ "–ì–∞–ª–µ—Ä–µ—è"
# 2. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ –µ–¥—ã
# 3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∞–Ω–∞–ª–∏–∑–∞
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ..."
2. –í –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏ inference:
   ```
   ü§ñ YoloFoodService: Starting food analysis...
   üîÑ YoloFoodService: Preprocessing image...
   üîÑ YoloFoodService: Running inference...
   ‚úÖ YoloFoodService: Inference complete
   üîÑ YoloFoodService: Post-processing detections...
   ‚úÖ YoloFoodService: Found 3 food items
   ```
3. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ | –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ |
|---------|---------------|-------------|
| –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ | 2-3 –º–∏–Ω—É—Ç—ã | - |
| –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ | 2-5 —Å–µ–∫—É–Ω–¥ | 2-5 —Å–µ–∫—É–Ω–¥ |
| –ê–Ω–∞–ª–∏–∑ —Ñ–æ—Ç–æ | 1-3 —Å–µ–∫—É–Ω–¥—ã | 1-3 —Å–µ–∫—É–Ω–¥—ã |
| –†–∞–∑–º–µ—Ä –≤ FileSystem | ~100 –ú–ë | ~100 –ú–ë |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ª–≥–∞—è
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –æ 2-3 –º–∏–Ω—É—Ç–∞—Ö –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∏–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- –ù–µ –¥–∞–≤–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. –ú–µ—Å—Ç–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- –ú–æ–¥–µ–ª—å –∑–∞–Ω–∏–º–∞–µ—Ç **~100 –ú–ë**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞
- –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–µ—Å—Ç–∞ –ø–æ–∫–∞–∂–∏—Ç–µ –æ—à–∏–±–∫—É

### 3. Web –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- `FileSystem.documentDirectory` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ iOS –∏ Android
- –î–ª—è web –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ mock –º–æ–¥–µ–ª—å

### 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ï—Å–ª–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Ä–≤–∞–Ω–æ, –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ
- –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ AIService

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏ –≤ FileSystem:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ Metro:
YoloFoodService.isModelLoaded()  # true/false

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏:
console.log(FileSystem.documentDirectory)
# iOS: file:///var/mobile/Containers/Data/Application/[UUID]/Documents/
# Android: file:///data/user/0/com.foodabuser/files/
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –º–æ–¥–µ–ª–∏:

```javascript
// –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –≤ YoloFoodService.js –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
export async function clearModelCache() {
  try {
    await FileSystem.deleteAsync(MODEL_DIR, { idempotent: true });
    await FileSystem.deleteAsync(FOOD_DB_PATH, { idempotent: true });
    console.log('‚úÖ Model cache cleared');
  } catch (error) {
    console.error('‚ùå Error clearing cache:', error);
  }
}

// –í—ã–∑–æ–≤–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:
YoloFoodService.clearModelCache()
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —É–∂–µ –ª–æ–≥–∏—Ä—É—é—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å:
- `‚úÖ Copied 5/43 shards (12%)`
- `‚úÖ Copied 10/43 shards (23%)`
- –ò —Ç.–¥.

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è Production:

1. **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏**
   ```jsx
   <ProgressBar progress={copyProgress / 100} />
   <Text>{copyProgress}% –∑–∞–≥—Ä—É–∂–µ–Ω–æ</Text>
   ```

2. **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏**
   ```jsx
   <Button onPress={cancelCopy}>–û—Ç–º–µ–Ω–∏—Ç—å</Button>
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Å—Ç–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ**
   ```javascript
   const freeSpace = await FileSystem.getFreeDiskStorageAsync();
   if (freeSpace < 150 * 1024 * 1024) { // < 150 –ú–ë
     alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ');
   }
   ```

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏**
   ```javascript
   // –ü—Ä–æ–≤–µ—Ä—è—Ç—å –≤–µ—Ä—Å–∏—é –º–æ–¥–µ–ª–∏
   // –°–∫–∞—á–∏–≤–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
   // –ó–∞–º–µ–Ω—è—Ç—å —Å—Ç–∞—Ä—É—é –º–æ–¥–µ–ª—å
   ```

5. **–°–∂–∞—Ç–∏–µ –º–æ–¥–µ–ª–∏**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å quantization (int8 –≤–º–µ—Å—Ç–æ float32)
   - –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Å 100 –ú–ë –¥–æ 30-40 –ú–ë

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [‚úÖ] YoloFoodService.js –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å FileSystem
- [‚úÖ] –§—É–Ω–∫—Ü–∏—è checkModelExists() —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [‚úÖ] –§—É–Ω–∫—Ü–∏—è copyModelToFileSystem() —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [‚úÖ] –§—É–Ω–∫—Ü–∏—è loadFoodDatabase() –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [‚úÖ] AddMealScreen.js –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- [‚úÖ] –ö–Ω–æ–ø–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- [‚úÖ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- [‚úÖ] Fallback –Ω–∞ mock –º–æ–¥–µ–ª—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [‚úÖ] –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ web –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [‚úÖ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## üéâ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç YOLOv8 –º–æ–¥–µ–ª—å –∏–∑ FileSystem
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ—Ñ–ª–∞–π–Ω
- ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω—É—é –±–∞–∑—É –ö–ë–ñ–£ –∏–∑ food_kbzu.json
- ‚úÖ –ò–º–µ–µ—Ç fallback –Ω–∞ mock/AIService –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏ –¥–∞–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å!** üöÄ

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 03.12.2025  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

